# 📦 靜態部署 - 快速開始指南

## ✅ 已完成的設定

您的專案已經配置好，可以直接進行靜態部署！

### 已完成項目：

- ✅ Vite 構建配置優化
- ✅ SPA 路由支援（Netlify & Vercel）
- ✅ 代碼分割（React、Prism 等）
- ✅ 相對路徑設定
- ✅ 構建成功測試

---

## 🚀 三步驟部署（最簡單）

### **推薦方式：Netlify 拖放部署**

```bash
# 步驟 1: 構建專案
npm run build

# 步驟 2: 前往 Netlify
# 開啟 https://app.netlify.com/drop

# 步驟 3: 拖放 dist 資料夾
# 將 frontend/dist 整個資料夾拖到網頁上
```

**完成！** 🎉 您會立即獲得一個 `.netlify.app` 網址

---

## 📝 詳細步驟教學

### 方法一：Netlify（最簡單，推薦新手）

#### A. 拖放部署（零設定）

1. **構建專案**

   ```bash
   cd frontend
   npm run build
   ```

   → 會在 `frontend/dist` 生成靜態文件

2. **註冊 Netlify**

   - 前往：https://www.netlify.com/
   - 點擊「Sign up」用 GitHub/Email 註冊

3. **部署網站**

   - 登入後，前往：https://app.netlify.com/drop
   - 直接拖放 `dist` 資料夾到網頁上
   - 等待上傳完成（約 10-30 秒）

4. **完成！**
   - 自動獲得網址：`https://random-name-123456.netlify.app`
   - 支援 HTTPS
   - 全球 CDN 加速

#### B. Git 自動部署（推薦進階用戶）

1. **推送到 GitHub**

   ```bash
   git add .
   git commit -m "準備部署"
   git push
   ```

2. **連結 Netlify**

   - 前往：https://app.netlify.com/
   - 點擊「Add new site」→「Import an existing project」
   - 選擇 GitHub，授權並選擇您的 repo

3. **設定構建**

   - **Base directory**: `frontend`
   - **Build command**: `npm run build`
   - **Publish directory**: `frontend/dist`
   - 點擊「Deploy site」

4. **自動部署**
   - 每次 push 到 GitHub 會自動重新部署
   - 可在 Netlify 面板查看部署狀態

---

### 方法二：Vercel（適合 React 專案）

#### A. CLI 快速部署

```bash
# 1. 安裝 Vercel CLI
npm install -g vercel

# 2. 登入
vercel login

# 3. 部署
cd frontend
vercel

# 按照提示操作：
# - Set up and deploy? Yes
# - Which scope? 選擇您的帳號
# - Link to existing project? No
# - Project name? 可用預設或自訂
# - Directory? ./ (預設)
# - Override settings? No
```

完成後會得到部署網址！

#### B. Git 自動部署

1. 前往：https://vercel.com/
2. 點擊「New Project」
3. Import Git Repository
4. 選擇您的專案
5. 設定：
   - **Framework Preset**: Vite
   - **Root Directory**: `frontend`
   - **Build Command**: `npm run build` (自動偵測)
   - **Output Directory**: `dist` (自動偵測)
6. 點擊「Deploy」

---

### 方法三：GitHub Pages（免費，適合開源專案）

```bash
# 1. 修改 vite.config.ts 的 base 設定
# 改成: base: '/你的repo名稱/'

# 2. 安裝 gh-pages
npm install -D gh-pages

# 3. 在 package.json 加入：
# "scripts": {
#   "deploy": "npm run build && gh-pages -d dist"
# }

# 4. 部署
npm run deploy

# 5. 在 GitHub repo 設定
# Settings → Pages → Source: gh-pages branch
```

網址會是：`https://你的用戶名.github.io/repo名稱/`

---

## 🧪 本地測試（部署前必做）

```bash
# 構建
npm run build

# 預覽生產版本
npm run preview
```

瀏覽器會開啟 `http://localhost:4173`，測試：

- ✅ 首頁載入
- ✅ 所有路由正常（導航、直接輸入網址）
- ✅ 圖片、CSS 正常
- ✅ 無主控台錯誤

---

## 📊 當前構建結果

```
dist/index.html                         0.92 kB
dist/assets/index-Ca8sje7a.css         29.58 kB (gzip: 5.92 kB)
dist/assets/prism-vendor-Bf7paRfi.js   19.21 kB (gzip: 7.34 kB)
dist/assets/react-vendor-D0rjvlIP.js  160.17 kB (gzip: 52.21 kB)
dist/assets/index-CFyCh9qn.js         211.50 kB (gzip: 66.05 kB)
```

✅ **總 gzip 大小約 132 KB** - 非常優秀的載入速度！

---

## 🎯 自訂域名（選用）

### Netlify

1. 進入網站設定
2. Domain settings → Add custom domain
3. 按照指示設定 DNS（通常是 CNAME 或 A 記錄）

### Vercel

1. Project Settings → Domains
2. 輸入域名
3. 設定 DNS（會給您 CNAME 值）

所有平台都自動提供免費 SSL 證書！

---

## 🐛 疑難排解

### 問題 1: 重新整理頁面出現 404

**原因**: SPA 路由需要伺服器設定
**解決**: ✅ 已設定 `_redirects` 和 `vercel.json`

### 問題 2: 圖片或 CSS 找不到

**原因**: 路徑設定錯誤
**解決**: ✅ 已設定 `base: './'` 使用相對路徑

### 問題 3: 構建失敗

```bash
# 清除並重裝依賴
rm -rf node_modules dist
npm install
npm run build
```

---

## 💡 部署後優化（進階）

1. **效能監控**

   - 使用 Google Lighthouse 測試效能
   - 目標：Performance > 90 分

2. **SEO 優化**

   - 修改 `index.html` 的 meta 標籤
   - 加入 Open Graph 標籤

3. **分析工具**

   - Netlify Analytics
   - Vercel Analytics
   - Google Analytics

4. **快取策略**
   - Netlify/Vercel 自動處理
   - 資源自動加上 hash，可安全快取

---

## 📚 更多資源

- [Netlify 文件](https://docs.netlify.com/)
- [Vercel 文件](https://vercel.com/docs)
- [Vite 部署指南](https://vitejs.dev/guide/static-deploy.html)

---

## ✨ 快速指令參考

```bash
# 開發
npm run dev

# 構建
npm run build

# 預覽構建
npm run preview

# 構建 + 預覽
npm run build && npm run preview
```

---

**🎉 您的專案已經準備好部署了！**

最快的方式就是：

1. `npm run build`
2. 拖放 `dist` 到 https://app.netlify.com/drop
3. 完成！

有任何問題歡迎查看 `DEPLOYMENT.md` 詳細指南！
